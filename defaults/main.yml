---
# defaults file for sbaerlocher.cloud

cloud_cloudscale_api_key: "{{  lookup('env','cloudscale_api_tokens') }}"
cloud_dns_search: "{{ dns-search }}"

cloud_cloud_init: |
  #cloud-config
  users:
    - name: ansible
      passwd: "{{ default(lookup('password')) }}"
      shell: /bin/bash
      primary-group: ansible
      sudo: ALL=(ALL) NOPASSWD:ALL
      groups: sudo
      ssh-authorized-keys:
        - "{{ cloud_ssh_public_key_ansible }}"
  package_update: true
  package_upgrade: true
  packages:
    - python2.7
    - python-pip
  network-interfaces: |
    iface ens4 inet static
      address "{{ ansible_host }}"
      netmask 255.255.255.0
      dns-nameserver 8.8.8.8
      dns-search "{{ cloud_dns_search }}"
      {% if cloud_route is defined %}
      "{{ cloud_route }}"
      {% endif %}
